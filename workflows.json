{
  "configs": [
    {
      "name": "bazel_default",
      "description": "Default bazel build configuration",
      "build_type": "bazel",
      "args": [
        "--test_output=all"
      ],
      "env": {}
    },
    {
      "name": "bazel_default_notest",
      "description": "Default bazel build configuration",
      "build_type": "bazel",
      "args": [],
      "env": {},
      "driver_options": {
        "@type": "pw.build.proto.BazelDriverOptions",
        "no_test": true
      }
    }
  ],
  "builds": [
    {
      "name": "wildcard_build",
      "use_config": "bazel_default_notest",
      "targets": [
        "//..."
      ]
    },
    {
      "name": "verilator_tests",
      "use_config": "bazel_default",
      "targets": [
        "//target/earlgrey/threads/kernel:threads_runner_verilator_test",
        "//target/earlgrey/ipc/user:ipc_runner_verilator_test"
      ]
    }
  ],
  "tools": [
    {
      "name": "format",
      "description": "Find and fix code formatting issues",
      "use_config": "bazel_default",
      "analyzer_friendly_args": [
        "--check"
      ],
      "target": "//:format"
    }
  ],
  "groups": [
    {
      "name": "default",
      "description": "Quick presubmit for validating code changes locally",
      "builds": [
        "format",
        "wildcard_build",
        "verilator_tests"
      ]
    }
  ]
}
